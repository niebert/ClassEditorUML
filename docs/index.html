<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Class Editor UML</title>
    <link href="jquery/jquery-ui.css" rel="stylesheet">
    <!-- Bootstrap Core CSS -->
     <link href="css/bootstrap.min.css" rel="stylesheet">
     <!-- Font-Awesome CSS -->
     <link href="css/font-awesome.min.css" rel="stylesheet">
     <!-- ACE Editor -->
     <script src="ace/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
     <script src="jquery/external/jquery/jquery.js" type="text/javascript"></script>
     <!-- JSON Editor for Code Generation -->
     <script src="js/jsoneditor4code.js"></script>

    <script>
    // vDataJSON is the main JSON storage for the privacy friendly WebApp
    // File Loaded into vDataJSON by script tag
    var vDataJSON = {};
    vDataJSON["tpl"] = {};
    vDataJSON["out"] = {};
    var vFileBase = "class";
    // ACE Editor is used in JSONEditor for Code Editor
    var vProgLanguage = "javascript";
    // Defined the Syntax Highlighting for ACE Editor - Used in Schema "schema/class_schema.js"
    // Set the default CSS theme and icon library globally
    JSONEditor.defaults.theme = 'bootstrap3';
    JSONEditor.defaults.iconlib = 'fontawesome4';
    JSONEditor.plugins.ace.theme = 'xcode';

    </script>
    <!-- ### UML Default File  #####################
    used for initializing afte delete class command
    -->
    <script src="db/uml_default.js"></script>
    <!-- ### UML Loaded File  ##################### -->
    <script src="db/umljs.js"></script>
    <!-- ### HANDLEBARS TEMPLATE  #####################
    Template ID: "javascript"
    Template: vDataJSON["tpl"]["javascript"]
    -->
    <script src="tpl/javascript_tpl.js"></script>
    <!-- ### COMPILE HANDLEBARS TEMPLATES  ############
    Template ID: "docu4github"
    Template: vDataJSON["tpl"]["docu4github"]
    -->
    <script src="tpl/docu4github_tpl.js"></script>
    <!-- ### SCHEMA LOADER ############################
    script tag stores the JSON schema in
    vDataJSON["class_schema"]
    -->
    <script src="schema/class_uml_schema.js"></script>
    <!-- ############################################## -->
  </head>
  <body  style="margin:20px">
  	<div>
    	<h1>UML Class Editor - JSON</h1>

  <div data-role="fieldcontain" style="display:none">
         <input type="file" id="fileJSON" name="fileJSON" value="Select JSON File" id="fileJSON" onchange="loader4JSON(this.id)"/>
    </div>

  	<div id="divNavigate"  align="center">
    <!-- the button vOpenJSON generates an onclick event for the fileJSON input file element in the DOM -->
 	 	<button id='bOpenJSON' style="color: white;background-color: #225988"  onclick="$( '#fileJSON' ).trigger('click');return false">
			<i class="fa fa-folder-open-o" aria-hidden="true"></i> Load
		</button>
    <button id='bSaveJSON' style="color: white;background-color: #225988"  onclick="vJSONEditor.saveJSON();return false">
			<i class="fa fa-floppy-o" aria-hidden="true"></i> Save
		</button>
   &nbsp;
		&nbsp;
    <b>File: </b>  <tt id="display_filename">class.json</tt>
		&nbsp;
		&nbsp;
    <!-- Function: exportCode() is defined in js/classeditor.js -->
    <button id='bExportHTML' style="color: white;background-color: #225988"  onclick="vJSONEditor.save4Template('javascript','.js','Javascript Code for Class');return false">
			<i class="fa fa-floppy-o" aria-hidden="true"></i> Export Code
	 </button>
   <!-- Function: exportDocumentation() is defined in js/classeditor.js -->
   <button id='bExportDoc' style="color: white;background-color: #225988"  onclick="vJSONEditor.save4Template('docu4github','_github.md','Github Documentation for Class');return false">
     <i class="fa fa-floppy-o" aria-hidden="true"></i> Export Documentaion
  </button>
    <!--
		<button id='bAddRecord' style="color: white;background-color: #225988"  onclick="vEditor4JSON.add();return false">
			<i class="fa fa-plus-square" aria-hidden="true"></i> Add
		</button>
    <button id='bInitDB' style="color: white;background-color: #c10303"  onclick="vEditor4JSON.initAsk();return false">
      <i class="fa fa-minus-square" aria-hidden="true"></i> Init DB
    </button>
    -->
		<button id='bDeleteClass' style="color: white;background-color: #c10303;display:none"  onclick="vJSONEditor.init_ask();return false">
			<i class="fa fa-minus-square" aria-hidden="true"></i> Delete Class
		</button>

    <span id='valid_indicator'></span>
	</div>
	<!-- BEGIN of JSON Editor -->
    <div id='editor_holder' style="margin:20px"></div>
	<!-- END of JSON Editor -->
    <button id='restore' style="display:none">Restore to Default</button>
    <button id='enable_disable' style="display:none">Disable/Enable Form</button>
    <button id='submit' style="display:none">Submit (console.log)</button>
    <button id='bExportJSON'>Export JSON</button>
    <button id='bExportSchemaJSON'>Export JSON Schema</button>
    <button id='bUpdateSchema' style="color: white;background-color: #225988;display:none"  onclick="vJSONEditor.create_editor();return false">
      <i class="fa fa-refresh" aria-hidden="true"></i>
      Update Schema
    </button>
		<button id='bTemplate' onclick="$('#divTemplates').toggle()">Debug Output</button>
<hr>
<center>
  <a href="https://github.com/niebert/ClassEditorUML/archive/master.zip" target="_blank">Download GitHub (2018)</a>
</center>
    <div id="divTemplates" style="display:none">
      <b>Output</b> <tt>[tOutput]</tt><br>
      <form id="fSubmitJSONdata" action="jsondata2submit.html" method="get" target="_blank">
        <textarea id="tOutput" name="jsondata" cols="125" rows="10"></textarea>
        <br>
        <input type="submit">
      </form>
      <hr>
      <b>JSON</b> <tt>[tOutJSON]</tt><br>
      <textarea id="tOutJSON" name="tOutJSON" cols="125" rows="10"></textarea>
      <hr>
      <b>JSON Errors</b> <tt>[tErrors]</tt><br>
      <textarea id="tErrors" name="tErrors" cols="125" rows="10">
      </textarea>
    <hr>

    </div>

    <script>

      // This is the starting value for the editor
      // We will use this to seed the initial editor
      // and to provide a "Restore to Default" button.
      var vJSON = vDataJSON["umljs"]; //see file "db/umljs.js"
      var vJSONEditor = new JSONEditor4Code(document);
      /*
      "editor_id": DOM id where the editor will be injected,
      "load_file_id" : "display_filename",
      */
      var vOptions = {
        "editor_var": "vJSONEditor",
        "editor_id": "editor_holder",
        "validator_id":"valid_indicator",
        "filejson_id" : "fileJSON",
        "filename_id" : "display_filename",
        "out_json": "tOutJSON",
        "out_code": "tOutput",
        "out_errors": "tErrors"
      };
      var vDefaultJSON = vDataJSON["uml_default"]; //see file "db/uml_default.js"
      //console.log("Edit JSON:\n"+JSON.stringify(vJSON,null,3));
      vJSONEditor.init(vJSON,
        vDefaultJSON,
        vDataJSON["class_schema"],
        vDataJSON["tpl"],
        vOptions);
    </script>


        <script>
          // Hook up the submit button to export JSON
          document.getElementById('bExportJSON').addEventListener('click',exporter4JSON);
          // Hook up the submit button to export JSON Schema
          document.getElementById('bExportSchemaJSON').addEventListener('click',exporter4Schema);

        </script>


  </body>
</html>
